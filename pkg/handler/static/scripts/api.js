// Generated by CoffeeScript 1.7.1
(function() {
  if (window.goule == null) {
    window.goule = {};
  }

  window.goule.api = {};

  window.goule.api.run = function(name, object, callback) {
    var match, path;
    path = window.location.pathname;
    match = /^(.*)index.html$/.exec(path);
    if (match != null) {
      path = match[1];
    }
    $.ajax("" + path + "api/" + name, {
      type: 'POST',
      data: JSON.stringify(object),
      contentType: 'application/json',
      cache: false,
      dataType: 'json',
      error: function() {
        return callback('Error making API call.', null);
      },
      success: function(data) {
        return callback(null, data);
      }
    });
  };

  window.goule.api.runBool = function(name, object, callback) {
    return window.goule.api.run(name, object, function(err, obj) {
      return callback(err == null);
    });
  };

  window.goule.api.auth = function(password, callback) {
    return window.goule.api.runBool('auth', password, callback);
  };

  window.goule.api.listServices = function(callback) {
    return window.goule.api.run('services', null, callback);
  };

  window.goule.api.changePassword = function(newPassword, callback) {
    return window.goule.api.runBool('change_password', newPassword, callback);
  };

  window.goule.api.setHttp = function(settings, callback) {
    return window.goule.api.runBool('set_http', settings, callback);
  };

  window.goule.api.setHttps = function(settings, callback) {
    return window.goule.api.runBool('set_https', settings, callback);
  };

  window.goule.api.getConfig = function(callback) {
    return window.goule.api.run('get_configuration', null, callback);
  };

  window.goule.api.setProxy = function(settings, callback) {
    return window.goule.api.runBool('set_proxy', settings, callback);
  };

  window.goule.api.setSessionTimeout = function(timeout, callback) {
    return window.goule.api.runBool('set_admin_session_timeout', timeout, callback);
  };

}).call(this);
